{"version":3,"sources":["Microcosm.js","webpack/bootstrap 7d8a1c7aa035170c08bf","./src/index.js","./src/transpose.js","./src/prefix.js","./src/Microcosm.js","./src/Microscope.jsx","./src/Store.js","./src/dispatch.js","./src/heartbeat.js","./src/intent.js","./src/promiseWrap.js","./src/query.js","external \"flux\"","external \"react\"","external \"react/addons\""],"names":["module","exports","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","Object","defineProperty","value","Store","Microscope","Microcosm","_x","fn","entity","undefined","arguments","initial","keys","reduce","memo","key","_interopRequire","obj","__esModule","transpose","identify","str","_createClass","defineProperties","target","props","prop","configurable","writable","Constructor","protoProps","staticProps","prototype","_classCallCheck","instance","TypeError","Heartbeat","intent","prefix","Dispatcher","seed","this","_seed","_heart","_dispatcher","register","_enqueue","bind","listen","get","ignore","payload","s","stores","send","beat","addActions","actions","addStores","_this","constants","serialize","store","_objectWithoutProperties","i","indexOf","hasOwnProperty","React","query","createClass","displayName","propTypes","flux","PropTypes","object","isRequired","getDefaultProps","element","tick","forceUpdate","componentDidMount","componentWillUnmount","render","_props","children","other","createElement","_tasks","state","getInitialState","all","_ref","type","body","toJSON","promiseWrap","dispatcher","result","then","dispatch","_callbacks","_tick","_pump","length","callback","filter","concat","cancelAnimationFrame","requestAnimationFrame","methods","method","name","_len","args","Array","_key","apply","Promise","resolve","Children","map","Component","cloneWithProps","addons","require"],"mappings":"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","file":"Microcosm.js","sourcesContent":["module.exports =\n/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n\n\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t/**\n\t * Microcosm\n\t * An isomorphic flux implimentation. The strength of Microcosm\n\t * is that each application is its own fully encapsulated world\n\t */\n\n\tvar Store = __webpack_require__(5);\n\texports.Store = Store;\n\tvar Microscope = __webpack_require__(4);\n\texports.Microscope = Microscope;\n\tvar Microcosm = __webpack_require__(3);\n\n\texports.Microcosm = Microcosm;\n\texports[\"default\"] = Microcosm;\n\n/***/ },\n/* 1 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\n\t/**\n\t * Transpose\n\t * Reduces over a value, setting the current index/key\n\t * to the result of a given function.\n\t *\n\t * For example:\n\t * transpose({ foo: 'bar' }, word => word.toUpperCase()) = { foo: 'BAR' }\n\t *\n\t */\n\n\tmodule.exports = function (_x, fn) {\n\t  var entity = arguments[0] === undefined ? {} : arguments[0];\n\t  var initial = arguments[2] === undefined ? {} : arguments[2];\n\n\t  var keys = Object.keys(entity);\n\n\t  return keys.reduce(function (memo, key) {\n\t    memo[key] = fn(entity[key], key);\n\t    return memo;\n\t  }, initial);\n\t};\n\n/***/ },\n/* 2 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\n\tvar _interopRequire = function (obj) { return obj && obj.__esModule ? obj[\"default\"] : obj; };\n\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t/**\n\t * Prefix\n\t * Given an object, return a new object whos keys are prefixed with\n\t * a given string.\n\t *\n\t * This module is responsible for constructing action constants\n\t */\n\n\tvar transpose = _interopRequire(__webpack_require__(1));\n\n\tvar identify = function (str, key) {\n\t  return \"\" + str + \"-\" + key;\n\t};\n\n\texports.identify = identify;\n\n\texports[\"default\"] = function (obj, str) {\n\t  return transpose(obj, function (value, key) {\n\t    return identify(str, key);\n\t  });\n\t};\n\n/***/ },\n/* 3 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\n\tvar _interopRequire = function (obj) { return obj && obj.__esModule ? obj[\"default\"] : obj; };\n\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var key in props) { var prop = props[key]; prop.configurable = true; if (prop.value) prop.writable = true; } Object.defineProperties(target, props); } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\n\tvar _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } };\n\n\t/**\n\t * Microcosm\n\t * An isomorphic flux implimentation. The strength of Microcosm\n\t * is that each application is its own fully encapsulated world\n\t */\n\n\tvar Heartbeat = _interopRequire(__webpack_require__(7));\n\n\tvar intent = _interopRequire(__webpack_require__(8));\n\n\tvar prefix = _interopRequire(__webpack_require__(2));\n\n\tvar transpose = _interopRequire(__webpack_require__(1));\n\n\tvar Dispatcher = __webpack_require__(11).Dispatcher;\n\n\tvar Microcosm = (function () {\n\t  function Microcosm(seed) {\n\t    _classCallCheck(this, Microcosm);\n\n\t    this._seed = seed || {};\n\t    this._heart = Heartbeat();\n\t    this._dispatcher = new Dispatcher();\n\t    this._dispatcher.register(this._enqueue.bind(this));\n\t  }\n\n\t  _createClass(Microcosm, {\n\t    listen: {\n\t      get: function () {\n\t        return this._heart.listen;\n\t      }\n\t    },\n\t    ignore: {\n\t      get: function () {\n\t        return this._heart.ignore;\n\t      }\n\t    },\n\t    _enqueue: {\n\t      value: function _enqueue(payload) {\n\t        for (var s in this.stores) {\n\t          this.stores[s].send(payload);\n\t        }\n\t        this._heart.beat();\n\t      }\n\t    },\n\t    addActions: {\n\t      value: function addActions(actions) {\n\t        this.actions = transpose(actions, intent(this._dispatcher));\n\t      }\n\t    },\n\t    addStores: {\n\t      value: function addStores(stores) {\n\t        var _this = this;\n\n\t        var constants = transpose(this.actions, prefix);\n\n\t        this.stores = transpose(stores, function (Store, id) {\n\t          return new Store(constants, _this._seed[id], _this);\n\t        });\n\t      }\n\t    },\n\t    serialize: {\n\t      value: function serialize() {\n\t        return transpose(this.stores, function (store) {\n\t          return store.serialize();\n\t        });\n\t      }\n\t    }\n\t  });\n\n\t  return Microcosm;\n\t})();\n\n\tmodule.exports = Microcosm;\n\n/***/ },\n/* 4 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\n\tvar _interopRequire = function (obj) { return obj && obj.__esModule ? obj[\"default\"] : obj; };\n\n\tvar _objectWithoutProperties = function (obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; };\n\n\tvar React = _interopRequire(__webpack_require__(12));\n\n\tvar query = _interopRequire(__webpack_require__(10));\n\n\tvar Microscope = React.createClass({\n\t  displayName: \"Microscope\",\n\n\t  propTypes: {\n\t    flux: React.PropTypes.object.isRequired\n\t  },\n\n\t  getDefaultProps: function getDefaultProps() {\n\t    return {\n\t      element: \"div\"\n\t    };\n\t  },\n\n\t  tick: function tick() {\n\t    this.forceUpdate();\n\t  },\n\n\t  componentDidMount: function componentDidMount() {\n\t    this.props.flux.listen(this.tick);\n\t  },\n\n\t  componentWillUnmount: function componentWillUnmount() {\n\t    this.props.flux.ignore(this.tick);\n\t  },\n\n\t  render: function render() {\n\t    var _props = this.props;\n\t    var children = _props.children;\n\t    var element = _props.element;\n\t    var flux = _props.flux;\n\n\t    var other = _objectWithoutProperties(_props, [\"children\", \"element\", \"flux\"]);\n\n\t    return React.createElement(element, other, query(children, flux.stores));\n\t  }\n\n\t});\n\n\tmodule.exports = Microscope;\n\n/***/ },\n/* 5 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var key in props) { var prop = props[key]; prop.configurable = true; if (prop.value) prop.writable = true; } Object.defineProperties(target, props); } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\n\tvar _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } };\n\n\t/**\n\t * Store\n\t * The basic state container for Microcosm. Store observes\n\t * changes, by assignment, to an immutable data structure.\n\t */\n\n\tvar Store = (function () {\n\t  function Store(constants, seed) {\n\t    _classCallCheck(this, Store);\n\n\t    this._tasks = this.register(constants);\n\t    this.state = this.getInitialState(seed);\n\t  }\n\n\t  _createClass(Store, {\n\t    getInitialState: {\n\t      value: function getInitialState() {}\n\t    },\n\t    register: {\n\t      value: function register() {}\n\t    },\n\t    all: {\n\t      get: function () {\n\t        return this.state;\n\t      }\n\t    },\n\t    send: {\n\t      value: function send(_ref) {\n\t        var type = _ref.type;\n\t        var body = _ref.body;\n\n\t        if (this._tasks && type in this._tasks) {\n\t          this._tasks[type].call(this, body);\n\t        }\n\t      }\n\t    },\n\t    toJSON: {\n\t      value: function toJSON() {\n\t        return this.state;\n\t      }\n\t    },\n\t    serialize: {\n\t      value: function serialize() {\n\t        return undefined;\n\t      }\n\t    }\n\t  });\n\n\t  return Store;\n\t})();\n\n\tmodule.exports = Store;\n\n\t// noop\n\n\t// noop\n\n/***/ },\n/* 6 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\n\tvar _interopRequire = function (obj) { return obj && obj.__esModule ? obj[\"default\"] : obj; };\n\n\t/**\n\t * Dispatch\n\t * Ensure a given value is a promise, then dispatch out when that\n\t * promise resolves.\n\t */\n\n\tvar promiseWrap = _interopRequire(__webpack_require__(9));\n\n\tmodule.exports = function (dispatcher, type, result) {\n\t  return promiseWrap(result).then(function (body) {\n\t    dispatcher.dispatch({ type: type, body: body });\n\t    return body;\n\t  });\n\t};\n\n/***/ },\n/* 7 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\n\t/**\n\t * Heartbeat\n\t * Based on Diode, emits a heartbeat whenever any store state has changed.\n\t * When Stores change, they can use this entity to broadcast\n\t * that state has changed.\n\t *\n\t * See https://github.com/vigetlabs/diode\n\t */\n\n\tmodule.exports = function () {\n\t  var _callbacks = [];\n\t  var _tick = null;\n\n\t  /**\n\t   * Callbacks are eventually executed, Heartbeat does not promise\n\t   * immediate consistency so that state propagation can be batched\n\t   */\n\t  var _pump = function _pump() {\n\t    /**\n\t     * Important: do not cache the length of _callbacks\n\t     * in the event a callback causes later subscriptions\n\t     * to disappear\n\t     */\n\t    for (var i = 0; i < _callbacks.length; i++) {\n\t      _callbacks[i]();\n\t    }\n\t  };\n\n\t  return {\n\n\t    /**\n\t     * Given a CALLBACK function, remove it from the Set of callbacks.\n\t     * Throws an error if the callback is not included in the Set.\n\t     */\n\t    ignore: function ignore(callback) {\n\t      _callbacks = _callbacks.filter(function (i) {\n\t        return i !== callback;\n\t      });\n\t    },\n\n\t    /**\n\t     * Given a CALLBACK function, add it to the Set of all callbacks.\n\t     */\n\t    listen: function listen(callback) {\n\t      _callbacks = _callbacks.concat(callback);\n\t    },\n\n\t    /**\n\t     * Trigger every callback in the Set\n\t     */\n\t    beat: function beat() {\n\t      if (_callbacks.length > 0) {\n\t        cancelAnimationFrame(_tick);\n\t        _tick = requestAnimationFrame(_pump);\n\t      }\n\t    }\n\n\t  };\n\t};\n\n/***/ },\n/* 8 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\n\tvar _interopRequire = function (obj) { return obj && obj.__esModule ? obj[\"default\"] : obj; };\n\n\t/**\n\t * Intent\n\t * Generates a function that creates the glue between actions and stores.\n\t */\n\n\tvar dispatch = _interopRequire(__webpack_require__(6));\n\n\tvar transpose = _interopRequire(__webpack_require__(1));\n\n\tvar identify = __webpack_require__(2).identify;\n\n\tmodule.exports = function (dispatcher) {\n\t  return function (methods, id) {\n\t    return transpose(methods, function (method, name) {\n\t      var type = identify(id, name);\n\t      return function () {\n\t        for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n\t          args[_key] = arguments[_key];\n\t        }\n\n\t        return dispatch(dispatcher, type, method.apply(undefined, args));\n\t      };\n\t    }, {});\n\t  };\n\t};\n\n/***/ },\n/* 9 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\n\t/**\n\t * PromiseWrap\n\t * Makes sure a given value is always a promise\n\t */\n\n\tmodule.exports = function (value) {\n\t  if (value instanceof Promise) {\n\t    return value;\n\t  } else {\n\t    return Promise.resolve(value);\n\t  }\n\t};\n\n/***/ },\n/* 10 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\n\tvar _interopRequire = function (obj) { return obj && obj.__esModule ? obj[\"default\"] : obj; };\n\n\tmodule.exports = query;\n\n\tvar React = _interopRequire(__webpack_require__(13));\n\n\tvar cloneWithProps = React.addons.cloneWithProps;\n\n\tfunction query(children, stores) {\n\t  return React.Children.map(children, function (Component) {\n\t    var query = Component.type.query;\n\n\t    return cloneWithProps(Component, query ? query(stores) : null);\n\t  });\n\t}\n\n/***/ },\n/* 11 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = require(\"flux\");\n\n/***/ },\n/* 12 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = require(\"react\");\n\n/***/ },\n/* 13 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = require(\"react/addons\");\n\n/***/ }\n/******/ ]);\n\n\n/** WEBPACK FOOTER **\n ** Microcosm.js\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 7d8a1c7aa035170c08bf\n **/","/**\n * Microcosm\n * An isomorphic flux implimentation. The strength of Microcosm\n * is that each application is its own fully encapsulated world\n */\n\nexport let Store      = require('./Store')\nexport let Microscope = require('./Microscope')\nexport let Microcosm  = require('./Microcosm')\n\nexport default Microcosm;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/index.js\n **/","/**\n * Transpose\n * Reduces over a value, setting the current index/key\n * to the result of a given function.\n *\n * For example:\n * transpose({ foo: 'bar' }, word => word.toUpperCase()) = { foo: 'BAR' }\n *\n */\n\nexport default (entity={}, fn, initial={}) => {\n  let keys = Object.keys(entity)\n\n  return keys.reduce((memo, key) => {\n    memo[key] = fn(entity[key], key)\n    return memo\n  }, initial)\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/transpose.js\n **/","/**\n * Prefix\n * Given an object, return a new object whos keys are prefixed with\n * a given string.\n *\n * This module is responsible for constructing action constants\n */\n\nimport transpose from './transpose'\n\nexport let identify = (str, key) => `${ str }-${ key }`\n\nexport default (obj, str) => {\n  return transpose(obj, (value, key) => identify(str, key))\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/prefix.js\n **/","/**\n * Microcosm\n * An isomorphic flux implimentation. The strength of Microcosm\n * is that each application is its own fully encapsulated world\n */\n\nimport Heartbeat from './heartbeat'\nimport intent    from './intent'\nimport prefix    from './prefix'\nimport transpose from './transpose'\n\nimport { Dispatcher } from 'flux'\n\nexport default class Microcosm {\n\n  constructor(seed) {\n    this._seed = seed || {}\n    this._heart = Heartbeat()\n    this._dispatcher = new Dispatcher()\n    this._dispatcher.register(this._enqueue.bind(this))\n  }\n\n  get listen() {\n    return this._heart.listen\n  }\n\n  get ignore() {\n    return this._heart.ignore\n  }\n\n  _enqueue(payload) {\n    for (let s in this.stores) {\n      this.stores[s].send(payload)\n    }\n    this._heart.beat()\n  }\n\n  addActions(actions) {\n    this.actions = transpose(actions, intent(this._dispatcher))\n  }\n\n  addStores(stores) {\n    let constants = transpose(this.actions, prefix)\n\n    this.stores = transpose(stores, (Store, id) => {\n      return new Store(constants, this._seed[id], this)\n    })\n  }\n\n  serialize() {\n    return transpose(this.stores, store => store.serialize())\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/Microcosm.js\n **/","import React from 'react'\nimport query from 'query'\n\nlet Microscope = React.createClass({\n\n  propTypes: {\n    flux : React.PropTypes.object.isRequired\n  },\n\n  getDefaultProps() {\n    return {\n      element: 'div'\n    }\n  },\n\n  tick() {\n    this.forceUpdate()\n  },\n\n  componentDidMount() {\n    this.props.flux.listen(this.tick)\n  },\n\n  componentWillUnmount() {\n    this.props.flux.ignore(this.tick)\n  },\n\n  render() {\n    let { children, element, flux, ...other } = this.props\n\n    return React.createElement(element, other, query(children, flux.stores))\n  }\n\n})\n\nexport default Microscope\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/Microscope.jsx\n **/","/**\n * Store\n * The basic state container for Microcosm. Store observes\n * changes, by assignment, to an immutable data structure.\n */\n\nexport default class Store {\n\n  constructor(constants, seed) {\n    this._tasks = this.register(constants)\n    this.state  = this.getInitialState(seed)\n  }\n\n  getInitialState() {\n    // noop\n  }\n\n  register() {\n    // noop\n  }\n\n  get all() {\n    return this.state\n  }\n\n  send({ type, body }) {\n    if (this._tasks && type in this._tasks) {\n      this._tasks[type].call(this, body)\n    }\n  }\n\n  toJSON() {\n    return this.state\n  }\n\n  serialize() {\n    return undefined\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/Store.js\n **/","/**\n * Dispatch\n * Ensure a given value is a promise, then dispatch out when that\n * promise resolves.\n */\n\nimport promiseWrap from './promiseWrap'\n\nexport default function (dispatcher, type, result) {\n  return promiseWrap(result).then(body => {\n    dispatcher.dispatch({ type, body })\n    return body\n  })\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/dispatch.js\n **/","/**\n * Heartbeat\n * Based on Diode, emits a heartbeat whenever any store state has changed.\n * When Stores change, they can use this entity to broadcast\n * that state has changed.\n *\n * See https://github.com/vigetlabs/diode\n */\n\nexport default function() {\n  var _callbacks = []\n  var _tick      = null\n\n  /**\n   * Callbacks are eventually executed, Heartbeat does not promise\n   * immediate consistency so that state propagation can be batched\n   */\n  var _pump = function() {\n    /**\n     * Important: do not cache the length of _callbacks\n     * in the event a callback causes later subscriptions\n     * to disappear\n     */\n    for (var i = 0; i < _callbacks.length; i++) {\n      _callbacks[i]()\n    }\n  }\n\n  return {\n\n    /**\n     * Given a CALLBACK function, remove it from the Set of callbacks.\n     * Throws an error if the callback is not included in the Set.\n     */\n    ignore(callback) {\n      _callbacks = _callbacks.filter(i => i !== callback)\n    },\n\n    /**\n     * Given a CALLBACK function, add it to the Set of all callbacks.\n     */\n    listen(callback) {\n      _callbacks = _callbacks.concat(callback)\n    },\n\n    /**\n     * Trigger every callback in the Set\n     */\n    beat() {\n      if (_callbacks.length > 0) {\n        cancelAnimationFrame(_tick)\n        _tick = requestAnimationFrame(_pump)\n      }\n    }\n\n  }\n\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/heartbeat.js\n **/","/**\n * Intent\n * Generates a function that creates the glue between actions and stores.\n */\n\nimport dispatch   from './dispatch'\nimport transpose  from './transpose'\nimport {identify} from './prefix'\n\nexport default dispatcher => {\n  return (methods, id) => {\n    return transpose(methods, (method, name) => {\n      let type = identify(id, name)\n      return (...args) => dispatch(dispatcher, type, method(...args))\n    }, {})\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/intent.js\n **/","/**\n * PromiseWrap\n * Makes sure a given value is always a promise\n */\n\nexport default value => {\n  if (value instanceof Promise) {\n    return value\n  } else {\n    return Promise.resolve(value)\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/promiseWrap.js\n **/","import React from 'react/addons'\n\nlet { cloneWithProps } = React.addons\n\nexport default function query (children, stores) {\n  return React.Children.map(children, Component => {\n    let { query } = Component.type\n    return cloneWithProps(Component, query ? query(stores) : null)\n  })\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/query.js\n **/","module.exports = require(\"flux\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"flux\"\n ** module id = 11\n ** module chunks = 0\n **/","module.exports = require(\"react\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"react\"\n ** module id = 12\n ** module chunks = 0\n **/","module.exports = require(\"react/addons\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"react/addons\"\n ** module id = 13\n ** module chunks = 0\n **/"],"sourceRoot":""}