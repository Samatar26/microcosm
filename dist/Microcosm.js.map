{"version":3,"sources":["Microcosm.js","webpack/bootstrap 642f3657ad2aa0917945","./src/index.js","./src/transpose.js","./src/prefix.js","./src/Microcosm.js","./src/Microscope.jsx","./src/Store.js","./src/dispatch.js","./src/heartbeat.js","./src/intent.js","./src/promiseWrap.js","external \"flux\"","external \"react/addons\""],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","id","loaded","call","m","c","p","Object","defineProperty","value","Store","Microscope","Microcosm","_x","fn","entity","undefined","arguments","initial","keys","reduce","memo","key","_interopRequire","obj","__esModule","transpose","identify","str","_createClass","defineProperties","target","props","prop","configurable","writable","Constructor","protoProps","staticProps","prototype","_classCallCheck","instance","TypeError","Heartbeat","intent","prefix","Dispatcher","seed","this","_seed","_heart","_dispatcher","register","_enqueue","bind","listen","get","ignore","payload","s","stores","send","beat","addActions","actions","addStores","_this","constants","serialize","store","_objectWithoutProperties","i","indexOf","hasOwnProperty","React","createClass","displayName","propTypes","flux","PropTypes","object","isRequired","getDefaultProps","element","tick","forceUpdate","componentDidMount","componentWillUnmount","render","_props","children","other","members","Children","map","Component","query","type","data","addons","cloneWithProps","createElement","_tasks","state","getInitialState","all","_ref","body","toJSON","promiseWrap","dispatcher","result","then","dispatch","_callbacks","_tick","_pump","length","callback","filter","concat","cancelAnimationFrame","requestAnimationFrame","methods","method","name","_len","args","Array","_key","apply","Promise","resolve","react"],"mappings":"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","file":"Microcosm.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n\n\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t/**\n\t * Microcosm\n\t * An isomorphic flux implimentation. The strength of Microcosm\n\t * is that each application is its own fully encapsulated world\n\t */\n\n\tvar Store = __webpack_require__(5);\n\texports.Store = Store;\n\tvar Microscope = __webpack_require__(4);\n\texports.Microscope = Microscope;\n\tvar Microcosm = __webpack_require__(3);\n\n\texports.Microcosm = Microcosm;\n\texports[\"default\"] = Microcosm;\n\n/***/ },\n/* 1 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\n\t/**\n\t * Transpose\n\t * Reduces over a value, setting the current index/key\n\t * to the result of a given function.\n\t *\n\t * For example:\n\t * transpose({ foo: 'bar' }, word => word.toUpperCase()) = { foo: 'BAR' }\n\t *\n\t */\n\n\tmodule.exports = function (_x, fn) {\n\t  var entity = arguments[0] === undefined ? {} : arguments[0];\n\t  var initial = arguments[2] === undefined ? {} : arguments[2];\n\n\t  var keys = Object.keys(entity);\n\n\t  return keys.reduce(function (memo, key) {\n\t    memo[key] = fn(entity[key], key);\n\t    return memo;\n\t  }, initial);\n\t};\n\n/***/ },\n/* 2 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\n\tvar _interopRequire = function (obj) { return obj && obj.__esModule ? obj[\"default\"] : obj; };\n\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t/**\n\t * Prefix\n\t * Given an object, return a new object whos keys are prefixed with\n\t * a given string.\n\t *\n\t * This module is responsible for constructing action constants\n\t */\n\n\tvar transpose = _interopRequire(__webpack_require__(1));\n\n\tvar identify = function (str, key) {\n\t  return \"\" + str + \"-\" + key;\n\t};\n\n\texports.identify = identify;\n\n\texports[\"default\"] = function (obj, str) {\n\t  return transpose(obj, function (value, key) {\n\t    return identify(str, key);\n\t  });\n\t};\n\n/***/ },\n/* 3 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\n\tvar _interopRequire = function (obj) { return obj && obj.__esModule ? obj[\"default\"] : obj; };\n\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var key in props) { var prop = props[key]; prop.configurable = true; if (prop.value) prop.writable = true; } Object.defineProperties(target, props); } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\n\tvar _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } };\n\n\t/**\n\t * Microcosm\n\t * An isomorphic flux implimentation. The strength of Microcosm\n\t * is that each application is its own fully encapsulated world\n\t */\n\n\tvar Heartbeat = _interopRequire(__webpack_require__(7));\n\n\tvar intent = _interopRequire(__webpack_require__(8));\n\n\tvar prefix = _interopRequire(__webpack_require__(2));\n\n\tvar transpose = _interopRequire(__webpack_require__(1));\n\n\tvar Dispatcher = __webpack_require__(10).Dispatcher;\n\n\tvar Microcosm = (function () {\n\t  function Microcosm(seed) {\n\t    _classCallCheck(this, Microcosm);\n\n\t    this._seed = seed || {};\n\t    this._heart = Heartbeat();\n\t    this._dispatcher = new Dispatcher();\n\t    this._dispatcher.register(this._enqueue.bind(this));\n\t  }\n\n\t  _createClass(Microcosm, {\n\t    listen: {\n\t      get: function () {\n\t        return this._heart.listen;\n\t      }\n\t    },\n\t    ignore: {\n\t      get: function () {\n\t        return this._heart.ignore;\n\t      }\n\t    },\n\t    _enqueue: {\n\t      value: function _enqueue(payload) {\n\t        for (var s in this.stores) {\n\t          this.stores[s].send(payload);\n\t        }\n\t        this._heart.beat();\n\t      }\n\t    },\n\t    addActions: {\n\t      value: function addActions(actions) {\n\t        this.actions = transpose(actions, intent(this._dispatcher));\n\t      }\n\t    },\n\t    addStores: {\n\t      value: function addStores(stores) {\n\t        var _this = this;\n\n\t        var constants = transpose(this.actions, prefix);\n\n\t        this.stores = transpose(stores, function (Store, id) {\n\t          return new Store(constants, _this._seed[id], _this);\n\t        });\n\t      }\n\t    },\n\t    serialize: {\n\t      value: function serialize() {\n\t        return transpose(this.stores, function (store) {\n\t          return store.serialize();\n\t        });\n\t      }\n\t    }\n\t  });\n\n\t  return Microcosm;\n\t})();\n\n\tmodule.exports = Microcosm;\n\n/***/ },\n/* 4 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\n\tvar _interopRequire = function (obj) { return obj && obj.__esModule ? obj[\"default\"] : obj; };\n\n\tvar _objectWithoutProperties = function (obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; };\n\n\tvar React = _interopRequire(__webpack_require__(11));\n\n\tvar Microscope = React.createClass({\n\t  displayName: \"Microscope\",\n\n\t  propTypes: {\n\t    flux: React.PropTypes.object.isRequired\n\t  },\n\n\t  getDefaultProps: function getDefaultProps() {\n\t    return {\n\t      element: \"div\"\n\t    };\n\t  },\n\n\t  tick: function tick() {\n\t    this.forceUpdate();\n\t  },\n\n\t  componentDidMount: function componentDidMount() {\n\t    this.props.flux.listen(this.tick);\n\t  },\n\n\t  componentWillUnmount: function componentWillUnmount() {\n\t    this.props.flux.ignore(this.tick);\n\t  },\n\n\t  render: function render() {\n\t    var _props = this.props;\n\t    var children = _props.children;\n\t    var element = _props.element;\n\t    var flux = _props.flux;\n\n\t    var other = _objectWithoutProperties(_props, [\"children\", \"element\", \"flux\"]);\n\n\t    var members = React.Children.map(children, function (Component) {\n\t      var query = Component.type.query;\n\n\t      var data = query ? query(flux.stores) : null;\n\n\t      return React.addons.cloneWithProps(Component, data);\n\t    });\n\n\t    return React.createElement(element, other, members);\n\t  }\n\n\t});\n\n\tmodule.exports = Microscope;\n\n/***/ },\n/* 5 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var key in props) { var prop = props[key]; prop.configurable = true; if (prop.value) prop.writable = true; } Object.defineProperties(target, props); } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\n\tvar _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } };\n\n\t/**\n\t * Store\n\t * The basic state container for Microcosm. Store observes\n\t * changes, by assignment, to an immutable data structure.\n\t */\n\n\tvar Store = (function () {\n\t  function Store(constants, seed) {\n\t    _classCallCheck(this, Store);\n\n\t    this._tasks = this.register(constants);\n\t    this.state = this.getInitialState(seed);\n\t  }\n\n\t  _createClass(Store, {\n\t    getInitialState: {\n\t      value: function getInitialState() {}\n\t    },\n\t    register: {\n\t      value: function register() {}\n\t    },\n\t    all: {\n\t      get: function () {\n\t        return this.state;\n\t      }\n\t    },\n\t    send: {\n\t      value: function send(_ref) {\n\t        var type = _ref.type;\n\t        var body = _ref.body;\n\n\t        if (this._tasks && type in this._tasks) {\n\t          this._tasks[type].call(this, body);\n\t        }\n\t      }\n\t    },\n\t    toJSON: {\n\t      value: function toJSON() {\n\t        return this.state;\n\t      }\n\t    },\n\t    serialize: {\n\t      value: function serialize() {\n\t        return undefined;\n\t      }\n\t    }\n\t  });\n\n\t  return Store;\n\t})();\n\n\tmodule.exports = Store;\n\n\t// noop\n\n\t// noop\n\n/***/ },\n/* 6 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\n\tvar _interopRequire = function (obj) { return obj && obj.__esModule ? obj[\"default\"] : obj; };\n\n\t/**\n\t * Dispatch\n\t * Ensure a given value is a promise, then dispatch out when that\n\t * promise resolves.\n\t */\n\n\tvar promiseWrap = _interopRequire(__webpack_require__(9));\n\n\tmodule.exports = function (dispatcher, type, result) {\n\t  return promiseWrap(result).then(function (body) {\n\t    dispatcher.dispatch({ type: type, body: body });\n\t    return body;\n\t  });\n\t};\n\n/***/ },\n/* 7 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\n\t/**\n\t * Heartbeat\n\t * Based on Diode, emits a heartbeat whenever any store state has changed.\n\t * When Stores change, they can use this entity to broadcast\n\t * that state has changed.\n\t *\n\t * See https://github.com/vigetlabs/diode\n\t */\n\n\tmodule.exports = function () {\n\t  var _callbacks = [];\n\t  var _tick = null;\n\n\t  /**\n\t   * Callbacks are eventually executed, Heartbeat does not promise\n\t   * immediate consistency so that state propagation can be batched\n\t   */\n\t  var _pump = function _pump() {\n\t    /**\n\t     * Important: do not cache the length of _callbacks\n\t     * in the event a callback causes later subscriptions\n\t     * to disappear\n\t     */\n\t    for (var i = 0; i < _callbacks.length; i++) {\n\t      _callbacks[i]();\n\t    }\n\t  };\n\n\t  return {\n\n\t    /**\n\t     * Given a CALLBACK function, remove it from the Set of callbacks.\n\t     * Throws an error if the callback is not included in the Set.\n\t     */\n\t    ignore: function ignore(callback) {\n\t      _callbacks = _callbacks.filter(function (i) {\n\t        return i !== callback;\n\t      });\n\t    },\n\n\t    /**\n\t     * Given a CALLBACK function, add it to the Set of all callbacks.\n\t     */\n\t    listen: function listen(callback) {\n\t      _callbacks = _callbacks.concat(callback);\n\t    },\n\n\t    /**\n\t     * Trigger every callback in the Set\n\t     */\n\t    beat: function beat() {\n\t      if (_callbacks.length > 0) {\n\t        cancelAnimationFrame(_tick);\n\t        _tick = requestAnimationFrame(_pump);\n\t      }\n\t    }\n\n\t  };\n\t};\n\n/***/ },\n/* 8 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\n\tvar _interopRequire = function (obj) { return obj && obj.__esModule ? obj[\"default\"] : obj; };\n\n\t/**\n\t * Intent\n\t * Generates a function that creates the glue between actions and stores.\n\t */\n\n\tvar dispatch = _interopRequire(__webpack_require__(6));\n\n\tvar transpose = _interopRequire(__webpack_require__(1));\n\n\tvar identify = __webpack_require__(2).identify;\n\n\tmodule.exports = function (dispatcher) {\n\t  return function (methods, id) {\n\t    return transpose(methods, function (method, name) {\n\t      var type = identify(id, name);\n\t      return function () {\n\t        for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n\t          args[_key] = arguments[_key];\n\t        }\n\n\t        return dispatch(dispatcher, type, method.apply(undefined, args));\n\t      };\n\t    }, {});\n\t  };\n\t};\n\n/***/ },\n/* 9 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\n\t/**\n\t * PromiseWrap\n\t * Makes sure a given value is always a promise\n\t */\n\n\tmodule.exports = function (value) {\n\t  if (value instanceof Promise) {\n\t    return value;\n\t  } else {\n\t    return Promise.resolve(value);\n\t  }\n\t};\n\n/***/ },\n/* 10 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = flux;\n\n/***/ },\n/* 11 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = react/addons;\n\n/***/ }\n/******/ ]);\n\n\n/** WEBPACK FOOTER **\n ** Microcosm.js\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 642f3657ad2aa0917945\n **/","/**\n * Microcosm\n * An isomorphic flux implimentation. The strength of Microcosm\n * is that each application is its own fully encapsulated world\n */\n\nexport let Store      = require('./Store')\nexport let Microscope = require('./Microscope')\nexport let Microcosm  = require('./Microcosm')\n\nexport default Microcosm;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/index.js\n **/","/**\n * Transpose\n * Reduces over a value, setting the current index/key\n * to the result of a given function.\n *\n * For example:\n * transpose({ foo: 'bar' }, word => word.toUpperCase()) = { foo: 'BAR' }\n *\n */\n\nexport default (entity={}, fn, initial={}) => {\n  let keys = Object.keys(entity)\n\n  return keys.reduce((memo, key) => {\n    memo[key] = fn(entity[key], key)\n    return memo\n  }, initial)\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/transpose.js\n **/","/**\n * Prefix\n * Given an object, return a new object whos keys are prefixed with\n * a given string.\n *\n * This module is responsible for constructing action constants\n */\n\nimport transpose from './transpose'\n\nexport let identify = (str, key) => `${ str }-${ key }`\n\nexport default (obj, str) => {\n  return transpose(obj, (value, key) => identify(str, key))\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/prefix.js\n **/","/**\n * Microcosm\n * An isomorphic flux implimentation. The strength of Microcosm\n * is that each application is its own fully encapsulated world\n */\n\nimport Heartbeat from './heartbeat'\nimport intent    from './intent'\nimport prefix    from './prefix'\nimport transpose from './transpose'\n\nimport { Dispatcher } from 'flux'\n\nexport default class Microcosm {\n\n  constructor(seed) {\n    this._seed = seed || {}\n    this._heart = Heartbeat()\n    this._dispatcher = new Dispatcher()\n    this._dispatcher.register(this._enqueue.bind(this))\n  }\n\n  get listen() {\n    return this._heart.listen\n  }\n\n  get ignore() {\n    return this._heart.ignore\n  }\n\n  _enqueue(payload) {\n    for (let s in this.stores) {\n      this.stores[s].send(payload)\n    }\n    this._heart.beat()\n  }\n\n  addActions(actions) {\n    this.actions = transpose(actions, intent(this._dispatcher))\n  }\n\n  addStores(stores) {\n    let constants = transpose(this.actions, prefix)\n\n    this.stores = transpose(stores, (Store, id) => {\n      return new Store(constants, this._seed[id], this)\n    })\n  }\n\n  serialize() {\n    return transpose(this.stores, store => store.serialize())\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/Microcosm.js\n **/","import React from 'react/addons'\n\nlet Microscope = React.createClass({\n\n  propTypes: {\n    flux : React.PropTypes.object.isRequired\n  },\n\n  getDefaultProps() {\n    return {\n      element: 'div'\n    }\n  },\n\n  tick() {\n    this.forceUpdate()\n  },\n\n  componentDidMount() {\n    this.props.flux.listen(this.tick)\n  },\n\n  componentWillUnmount() {\n    this.props.flux.ignore(this.tick)\n  },\n\n  render() {\n    let { children, element, flux, ...other } = this.props\n\n    let members = React.Children.map(children, Component => {\n      let { query } = Component.type\n      let data = query ? query(flux.stores) : null\n\n      return React.addons.cloneWithProps(Component, data)\n    })\n\n    return React.createElement(element, other, members)\n  }\n\n})\n\nexport default Microscope\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/Microscope.jsx\n **/","/**\n * Store\n * The basic state container for Microcosm. Store observes\n * changes, by assignment, to an immutable data structure.\n */\n\nexport default class Store {\n\n  constructor(constants, seed) {\n    this._tasks = this.register(constants)\n    this.state  = this.getInitialState(seed)\n  }\n\n  getInitialState() {\n    // noop\n  }\n\n  register() {\n    // noop\n  }\n\n  get all() {\n    return this.state\n  }\n\n  send({ type, body }) {\n    if (this._tasks && type in this._tasks) {\n      this._tasks[type].call(this, body)\n    }\n  }\n\n  toJSON() {\n    return this.state\n  }\n\n  serialize() {\n    return undefined\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/Store.js\n **/","/**\n * Dispatch\n * Ensure a given value is a promise, then dispatch out when that\n * promise resolves.\n */\n\nimport promiseWrap from './promiseWrap'\n\nexport default function (dispatcher, type, result) {\n  return promiseWrap(result).then(body => {\n    dispatcher.dispatch({ type, body })\n    return body\n  })\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/dispatch.js\n **/","/**\n * Heartbeat\n * Based on Diode, emits a heartbeat whenever any store state has changed.\n * When Stores change, they can use this entity to broadcast\n * that state has changed.\n *\n * See https://github.com/vigetlabs/diode\n */\n\nexport default function() {\n  var _callbacks = []\n  var _tick      = null\n\n  /**\n   * Callbacks are eventually executed, Heartbeat does not promise\n   * immediate consistency so that state propagation can be batched\n   */\n  var _pump = function() {\n    /**\n     * Important: do not cache the length of _callbacks\n     * in the event a callback causes later subscriptions\n     * to disappear\n     */\n    for (var i = 0; i < _callbacks.length; i++) {\n      _callbacks[i]()\n    }\n  }\n\n  return {\n\n    /**\n     * Given a CALLBACK function, remove it from the Set of callbacks.\n     * Throws an error if the callback is not included in the Set.\n     */\n    ignore(callback) {\n      _callbacks = _callbacks.filter(i => i !== callback)\n    },\n\n    /**\n     * Given a CALLBACK function, add it to the Set of all callbacks.\n     */\n    listen(callback) {\n      _callbacks = _callbacks.concat(callback)\n    },\n\n    /**\n     * Trigger every callback in the Set\n     */\n    beat() {\n      if (_callbacks.length > 0) {\n        cancelAnimationFrame(_tick)\n        _tick = requestAnimationFrame(_pump)\n      }\n    }\n\n  }\n\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/heartbeat.js\n **/","/**\n * Intent\n * Generates a function that creates the glue between actions and stores.\n */\n\nimport dispatch   from './dispatch'\nimport transpose  from './transpose'\nimport {identify} from './prefix'\n\nexport default dispatcher => {\n  return (methods, id) => {\n    return transpose(methods, (method, name) => {\n      let type = identify(id, name)\n      return (...args) => dispatch(dispatcher, type, method(...args))\n    }, {})\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/intent.js\n **/","/**\n * PromiseWrap\n * Makes sure a given value is always a promise\n */\n\nexport default value => {\n  if (value instanceof Promise) {\n    return value\n  } else {\n    return Promise.resolve(value)\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/promiseWrap.js\n **/","module.exports = flux;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"flux\"\n ** module id = 10\n ** module chunks = 0\n **/","module.exports = react/addons;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"react/addons\"\n ** module id = 11\n ** module chunks = 0\n **/"],"sourceRoot":""}